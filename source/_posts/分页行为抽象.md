tags:
    - 分页
    - 封装
categories: 
    - 小程序
---
>业务场景

前台页面获取服务器数据时，如果一次请求向后台获取所有列表数据，
会导致服务器压力过大、用户体验较差，
所以采取分页策略，一次请求n条数据返回

>数据状态

* 正在加载、加载完毕
loading

* 没有更多数据
hasMore，false避免向后台发送请求

>重复加载

* 用户连续点击，使用锁机制，在上次请求未返回结果时，上锁，避免
数据重复
locked

* 避免死锁，网络中断后恢复，reject中释放锁

>封装性

* 抽象出组件共同行为：分页
behaviors

* setMoreData hasMore getCurrentStart initData

* 提高代码可读性，一些诸如setData({loading:false})的设置，封装
成_unlocked() _locked()方法